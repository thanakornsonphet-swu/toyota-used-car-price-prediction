# Toyota Used Car Price Prediction

## ที่มาและปัญหาทางธุรกิจ
เราจำลองสถานการณ์ว่า เราเป็นดีลเลอร์รถมือสอง **SWU Motors** ที่กำลังเจอปัญหาทางธุรกิจ เพราะยอดขายลดลง 18% เนื่องจากการตั้งราคาซื้อขายที่ผิดพลาดของพนักงานใหม่ (Junior Staff) 
* อาจตั้งราคาขายสูงเกินไป ทำให้ไม่สามารถขายสินค้าได้ 
* หรือตั้งราคาต่ำเกินไปจากราคาตลาดทำให้ขาดทุน

### ขยายความ Business Domain
*(เพิ่มเติมจากที่ Present ตอนเช้านะครับ)*
ทีมเราจำลองว่า dataset นี้คือการเก็บรวบรวมราคาตลาดจากหลายๆ ดีลเลอร์ 1 รุ่นอาจมีหลายราคา โดยไมล์รถยนต์อาจคละกันไป ทำให้เราไม่มีราคากลางที่แท้จริง ดังนั้นการตั้งราคารถยนต์แต่ละคันต่าง condition เช่น ไมล์, ปี, เครื่องยนต์, ประเภทเชื้อเพลิง อาจเป็นเรื่องยาก เนื่องจากเราไม่สามารถใช้ราคาเฉลี่ยหรือราคากลางของแต่ละรุ่นได้ เป็นเหตุผลของโปรเจคเราที่ต้องการทำนายราคารถยนต์แตกต่าง condition ได้อย่างแม่นยำ

### ทำไมเป้าหมายต้องเป็น RMSE ต่ำกว่า 1,250? (Aj.Subhorn)
1.  ราคาเฉลี่ยรถยนต์ใน data นี้อยู่ที่ประมาณ 12,522 หรือประมาณ 5 แสนบาท ดังนั้นเราเลยใช้เลข 1,250 (ประมาณ 5,000 บาท) เป็น 1 หน่วยของ RMSE หรือ 10% ของราคาเฉลี่ย เพื่อให้ยุติธรรมที่สุดในการทำนายต่อการราคาขึ้นลง 1 หน่วย
2.  **กำไรขั้นต่ำ:** เราจำลองว่า ดีลเลอร์ น่าจะมีกำไรขั้นต่ำที่ 10% สมมุติว่ารถยนต์ราคา 12,522 (Avg)
    * ถ้าโมเดลเราทำนายราคาถูก เราได้กำไรขั้นต่ำที่ 10%
    * ถ้าโมเดลเราทำนายราคาผิด เราขาดทุน 10% (10% น่าจะเป็นช่วงที่รับได้ที่สมเหตุสมผลครับ)

## เป้าหมาย Project
* สร้างโมเดลทำนายราคา โดยมีค่าความ RMSE ต่ำกว่า 1,250
* หาปัจจัย หรือ ความสัมพันธ์ที่ส่งผลต่อราคา เพื่อเป็นแนวทางในการตั้งราคา

---

## ข้อมูลที่ใช้ (Dataset)
* **Source:** 100,000 UK Used Car Dataset (Kaggle)
* **Target:** ราคารถยนต์ (price)
* **Features:** รุ่นรถ (Model), ปีผลิต (Year), ระบบเกียร์ (Transmission), เลขไมล์ (Mileage), ชนิดเชื้อเพลิง (FuelType), ภาษี (Tax), อัตราสิ้นเปลือง (MPG), และ ขนาดเครื่องยนต์ (EngineSize)

## กระบวนการทำงาน (Data Analytics)

### 1. เตรียมข้อมูล / กรองข้อมูล (Data Preparation)
[![Screenshot-2568-12-14-at-14-27-34.png](https://i.postimg.cc/NFNmr7sF/Screenshot-2568-12-14-at-14-27-34.png)](https://postimg.cc/RJHNktnx)
* **เครื่องมือ:** Excel (Power Query), Data Analysis Toolpak
* **กระบวนการ:** Cleaning ใช้ Power Query ตรวจสอบ Data Type, Trim ช่องว่าง, ลบข้อมูลซ้ำ
* **ตรวจสอบความผิดปกติ (Data Profiling):** Valid ควรเป็น 100% ไม่มี Error หรือ Empty
    * *ค้นพบว่า dataset มีความสมบูรณ์ไม่มี ข้อมูลซ้ำ หรือ data ที่ผิดปกติครับ*

### 2. หา Insights จาก Dataset (EDA)

#### 2.1 Distribution of Car Prices
[![Screenshot-2568-12-14-at-14-26-07.png](https://i.postimg.cc/jdZZzPgw/Screenshot-2568-12-14-at-14-26-07.png)](https://postimg.cc/kBRQC6dq)
เราทำการพรอตกราฟ เพื่อดูการกระจายราคา ค้นพบว่า:
* การกระจายราคาตลาดเป็นแบบ **เบ้ขวา (Right Skewed)**
* ข้อมูลรถยนต์ Toyota ส่วนใหญ่เป็น รถราคาประหยัด £9,995 แต่ค่าเฉลี่ยตลาดถูกดึงให้สูงเกินจริงจากรถยนต์ราคาสูงเพียงส่วนน้อย
* **ความเสี่ยงจากการกระจายตัวสูง (High Volatility):** เราค้นพบว่าค่า SD สูง (£6,345) และช่วงราคากว้าง (£850 - £60,000) ทำให้ราคาตั้งราคาอาจเป็นไปได้ยาก ถ้าไม่มีเครื่องมือเข้ามาช่วย

#### 2.2 Mileage vs Price & Fuel Type
[![Screenshot-2568-12-14-at-14-20-52.png](https://i.postimg.cc/Qx1jCNfV/Screenshot-2568-12-14-at-14-20-52.png)](https://postimg.cc/xcfwFQDS)
เมื่อเราดูความสัมพันธ์ของ ไมล์ และ ราคา รวมถึงประเภทเชื้อเพลิงพบว่า:
* **รถ Hybrid (สีส้ม):** จุดส่วนใหญ่อยู่ด้าน *ซ้ายบน* ของกราฟ อาจเป็นเพราะว่าเป็นรถรุ่นใหม่ เทคโนโลยีสูง ทำให้ราคามือสองยังคงแข็งแรง
* **Diesel (สีน้ำเงิน):** กระจายตัวไปทาง *ขวาสุด* ของกราฟ พบว่ารถดีเซล แม้เลขไมล์จะสูงแต่ราคาก็ไม่ได้ตกเหมือนรถเบนซิน
* **Petrol (สีเขียวฟ้า):** กองอยู่ด้าน *ล่างซ้าย* พบว่า ราคาลดเร็วเมื่อ Mileage เพิ่มกว่ากลุ่มอื่น
* **สรุป:** เมื่อ Mileage เพิ่มขึ้น มีความสัมพันธ์เชิงลบกับ ราคา แต่ราคาอาจกระจายกว้างมากใน Mileage เดียวกัน เนื่องจาก Fuel Type มีผลชัดเจนต่อระดับราคา

#### 2.3 Engine Size vs Year
[![Screenshot-2568-12-14-at-14-25-23.png](https://i.postimg.cc/7Ztty0SH/Screenshot-2568-12-14-at-14-25-23.png)](https://postimg.cc/v49tr1Pk)
ดูความสัมพันธ์ระหว่างเครื่องยนต์ ต่อ ปี โดยสีที่เข้ม-อ่อน แสดงราคาที่สูงขึ้นตามเฉดสี
*(การจัดกลุ่มประเภทรถยนต์ตามคำแนะนำอาจารย์ เพื่ออธิบาย Business Domain)*
* **1.0 - 1.5 L:** เครื่องยนต์ขนาดเล็ก (รถบ้านราคาประหยัด)
* **1.6 - 1.8 L:** เครื่องยนต์ขนาดกลาง (รถบ้านราคาประหยัด)
* **2.0 L ขึ้นไป:** เครื่องยนต์ขนาดใหญ่ (รถบ้านราคาประหยัด)

**สิ่งที่น่าสนใจ:**
1.  ข้อมูลรถยนต์ Toyota ส่วนใหญ่ใช้ เครื่องยนต์ขนาดเล็ก-กลาง (1.0-2.0L)
2.  ข้อมูลรถรุ่นใหม่ (หลังปี 2016 ขึ้นไป) มีความหลากหลายของขนาดเครื่องยนต์มากขึ้น และเริ่มเห็นเครื่องยนต์ขนาดกลาง-ใหญ่ (1.6-3.0 L) ชัดเจน

**Price Insight:**
* **สีเข้ม (ราคาสูง):** พบมากในรถ ปีใหม่ + เครื่องยนต์ใหญ่
* **สีอ่อน (ราคาต่ำ):** กระจุกตัวในรถ ปีเก่า + เครื่องยนต์ขนาดเล็ก-กลาง
* **สรุป:** ราคาสูงขึ้นตามปีรถและขนาดเครื่องยนต์อย่างชัดเจน

#### 2.4 Price Distribution by Engine Size
[![Screenshot-2568-12-14-at-14-22-11.png](https://i.postimg.cc/3JXH7SwG/Screenshot-2568-12-14-at-14-22-11.png)](https://postimg.cc/rKwHN9xy)
* **เครื่องใหญ่:** ราคาสูงขึ้นชัดเจน, ความผันผวนของราคาสูง (box plot กว้าง)
* **เครื่องเล็ก:** ราคาคงที่กว่า, ราคาค่อนข้างใกล้เคียงกัน
* **Note:** 3.0 L ค่า Median ไม่สูงที่สุด แต่ราคามีการกระจายตัวสุด อาจมีทั้งรุ่นธรรมดาและรุ่นแพงมากปะปนกัน
* **Insight:** Engine Size อาจเป็นปัจจัยหลัก ที่กำหนดระดับราคา แต่ขนาดเครื่องเพียงอย่างเดียวไม่สามารถเพียงพอในการตั้งราคา

#### 2.5 Correlation Heatmap
[![Screenshot-2568-12-14-at-14-23-20.png](https://i.postimg.cc/Y2F5fnYW/Screenshot-2568-12-14-at-14-23-20.png)](https://postimg.cc/F19ChxPr)
**ความสัมพันธ์เชิงบวก:**
* **Engine Size → Price (+0.73 สูงมาก):** ขนาดเครื่องยนต์เป็นปัจจัยที่มีผลต่อราคามากที่สุด
* **Year → Price (+0.42 ปานกลาง):** รถปีใหม่มีแนวโน้มราคาสูงกว่า
* **Tax → Price (+0.22 ต่ำ-ปานกลาง):** ภาษีสูงสัมพันธ์กับรถสเปกสูง / ราคาแพง

**ความสัมพันธ์เชิงลบ:**
* **Mileage → Price (-0.30):** รถที่วิ่งเยอะ ราคาลดลง

**ไม่มีผล:**
* **MPG → Price (-0.04):** ความประหยัดน้ำมันไม่ส่งผลต่อราคาโดยตรง

---

## สรุปผล (Conclusion)

### Business Insights
1.  **ขนาดเครื่องยนต์** คือปัจจัยหลักในการแบ่งเกรดและราคารถ (ชัดเจนกว่าปีผลิต)
2.  **Market Structure:** เป็นแบบ "เบ้ขวา" (Right Skewed) รถส่วนใหญ่เป็นราคาประหยัด หรือเครื่องยนต์เล็ก แต่มีรถเครื่องยนต์ใหญ่จำนวนน้อยดึงค่าเฉลี่ยขึ้น
3.  รถเครื่องยนต์ดีเซลรักษามูลค่าได้ดีกว่าและเสื่อมราคาช้ากว่ารถเบนซินเมื่อใช้งานหนัก (ไมล์สูง)

### Predictive Results
จากการสร้างโมเดลในวิชา DS514-515 พบว่า:
* โมเดล **Random Forest** มีค่าความแม่นยำสูง ($R^2 = 97\%$)
* มีความคลาดเคลื่อนเฉลี่ย (MAE) ประมาณ £750
* **RMSE ประมาณ £1,102.96 ต่อคัน** (บรรลุเป้าหมาย < 1,250)

แสดงให้เห็นถึงศักยภาพในการนำไปใช้งานจริงในการตั้งราคารถยนต์

---

## คำแนะนำและสิ่งที่คาดหวังในทางธุรกิจ
นำเครื่องมือ Pricing Tool ที่ได้จาก ML ให้ทีมขายใช้เป็น **ราคากลาง** ในการซื้อขายราคารถยนต์

**สิ่งที่คาดหวัง:**
1.  แก้ปัญหาการตั้งราคาผิดพลาด ช่วยกู้คืนยอดขายที่ตกลง 18% ให้กลับมา
2.  ลดโอกาสการ "ขายถูกไป" และลดความเสี่ยงในการ "รับซื้อแพงไป"
3.  สร้างมาตรฐานราคากลาง (Fair Price) ลดการตัดสินใจผ่านการพึ่งพาประสบการณ์ส่วนบุคคล

---

[![Screenshot-2568-12-14-at-14-31-03.png](https://i.postimg.cc/PrpP4k2h/Screenshot-2568-12-14-at-14-31-03.png)](https://postimg.cc/F7vrr8Mn)

## Deal Recommendation:

1.  พนักงานขาย: ใช้โมเดลเป็นราคากลางสําหรับ ช่วยตั้งราคาซื้อขายได้แม่นยํา
2.  พนักงานจัดซื้อ: ใช้โมเดลเป็นราคากลางสําหรับ ซื้อรถยนต์มือสองเข้ามา
   - Undervalued (สีเขียว): ควรซื้อ (ราคาทําป้าย ถูกกว่า ราคาประเมิน) -> สามารถทํากําไร
   - Overvalued (สีแดง): ควรระวัง (ราคาป้าย แพงกว่า ราคาประเมิน) -> เสี่ยงขาดทุน
