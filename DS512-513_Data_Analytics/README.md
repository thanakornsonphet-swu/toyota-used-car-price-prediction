โครงการทำนายราคารถยนต์ Toyota มือสอง (Toyota Used Car Price Prediction)
*ขออนุญาติขยายความเพิ่มเติม บางมุมที่อาจารย์ถาม เพิ่มเติมจากที่ present เมื่อเช้านะครับ

ท่ีมา: เราจำลองสถานการณ์ว่า เราเป็นดีลเลอร์รถมือสอง SWU Motors ที่กำลังเจอปัญหาทางธุรกิจ เพราะยอดขายลดลง 18% เนื่องจากการตั้งราคาที่ผิดพลาดของพนักงานขายใหม่ (Junior Sales Staff) อาจตั้งราคาขายสูงเกินไป ทำให้ไม่สามารถขายสินค้าได้ หรือตั้งราคาต่ำเกินไปจากราคาตลาดทำให้ขาดทุน

ขอขยายความ Business Domain ที่อาจารย์แนะนำนะครับ:
	ทีมเราจำลองว่า dataset นี้คือการเก็บรวบรวมราคาตลาดจากหลายๆดีลเลอร์ 1 รุ่นอาจมีหลายราคา โดยไมล์รถยนต์อาจคละกันไป ทำให้เราไม่มีราคากลางที่แท้จริง ดังนั้นการตั้งราคารถยนต์แต่ละคันต่าง condition เช่น ไมล ปี เครื่องยนต์ ประเภทิ เชื้อเพลง อาจเป็นเรื่องยากเนื่องจากเราไม่สามารถใช้ราคาเฉลี่ยหรือราคากลางของแต่ละรุ่นได้ เป็นเหตุผลของโปรเจคเราที่ต้องการทำนายราคารถยนต์แตกต่าง conditon ได้อย่างแม่นยำ


เพิ่มเติม: ทำไมต้อง ต่ำกว่า 1,250 (Aj.Sup) comment ว่า เราอาจจะตั้ง 1,300 หรือ 1,400 ก็ได้
เนื่องจากใน data canvas ไม่ได้ระบุ ขอขยายความ ที่อาจารย์ถามเพิ่มเติ่มนะครับ
จริงๆอาจารย์ถูกต้อง จริงๆเราเลือกเลขไหนก็ได้ เราไม่ได้ล็อกเลขที่แน่นอนที่เลขเพียงเลขเดียว 1,250 แต่เหตุผลของเลขนี้มี 2 ข้อตามด้านล่างครับ
ราคาเฉลี่ยรถยนต์ใน data นี้อยู่ที่ประมาณ 12,522 หรือประมาณ 5 แสนบาท ดังนั้นเราเลยใช้เลข 1,250 หรือประมาณ 5,000 บาท เป็น 1 หน่วยของ ML หรือ 10% ของราคาเฉลี่ย เพื่อให้ยุติธรรมที่สุด ในการทำนายราคา
เราจำลองว่า ดีลเลอร์ น่าจะมีกำไรขั้นต่ำที่ 10% สมมุติว่ารถยนต์ราคา 12,522 (Avg)
ถ้าโมเดลเราทำนายราคาถูก เราได้กำไรขั้นต่ำที่ 10%
ถ้าโมเดลเราทำนายราคาผิด เราขาดทุน 10%
10% น่าจะเป็นช่วงที่รับได้ที่สมเหตุสมผลครับ


ทบทวนเป้าหมาย Project:
สร้างโมเดลทำนายราคา โดยมีค่าความ RMSE ต่ำกว่า 1,250
หาปัจจัย หรือ ความสัมพันธ์ที่ส่งผลต่อราคา เพื่อเป็นแนวทางในการตั้งราคา
ข้อมูลที่ใช้ (Dataset)
Source: 100,000 UK Used Car Dataset (Kaggle)
Target: ราคารถยนต์ (price)
Features: รุ่นรถ (Model), ปีผลิต (Year), ระบบเกียร์ (Transmission), เลขไมล์ (Mileage), ชนิดเชื้อเพลิง (FuelType), ภาษี (Tax), อัตราสิ้นเปลือง (MPG), และ ขนาดเครื่องยนต์ (EngineSize)

กระบวนการทำงาน (Data Analytics)
เตรียมข้อมูล / กรองข้อมูล จาก dataset

เครื่องมือ: Excel (Power Query), Data Analysis Toolpak
กระบวนการ: Cleaning: ใช้ Power Query ตรวจสอบ Data Type, Trim ช่องว่าง, ลบข้อมูลซ้ำ ตรวจสอบความผิดปกติ Data Profiling): Valid: ควรเป็น 100% ไม่มี Error หรือ Empty
*ค้นพบว่า dataset มีความสมบูรณ์ไม่มี ข้อมูลซ้ำ หรือ data ที่ผิดปกติครับ


2. หา Insights จาก dataset
2.1 
เราทำการพรอตกราฟ เพื่อดูการกระจายราคา
ค้นพบว่า:
การกระจายราคาตลาดเป็นแบบ เบ้ขวา (Right Skewed)
ข้อมูลรถยนต์ Toyota ส่วนใหญ่เป็น รถราคาประหยัด £9,995 แต่ค่าเฉลี่ยตลาดถูกดึงให้สูงเกินจริงจาก รถยนต์ราคาสูงเพียงส่วนน้อย
ความเสี่ยงจากการกระจายตัวสูง (High Volatility)
เราค้นพบว่าค่า (SD) สูง £6,345 และช่วงราคากว้าง (£850 - £60,000) ทำให้ราคาตั้งราคาอาจเป็นไปได้ยาก ถ้าไม่มีเครื่องมือเข้ามาช่วย



เมื่อเราดูความสัมพันธ์ของ ไมล์ และ ราคา รวมถึงประเภทเชื้อเพลิงพบว่า
รถ Hybrid (ไฮบริด): สีส้ม
ตำแหน่ง: จุดส่วนใหญ่อยู่ด้าน ซ้ายบน ของกราฟ
อาจเป็นเพราะว่า เป็รรถรุ่นใหม่ เทคโนโลยีสูง ทำให้ราคามือสองยังคงแข็งแรง


Diesel (ดีเซล): สีน้ำเงิน
ตำแหน่ง: กระจายตัวไปทาง ขวาสุด ของกราฟ
พบว่ารถดีเซล แม้เลขไมล์จะสูงแต่ราคาก็ไม่ได้ตกหมือนรถเบนซิน


Petrol (เบนซิน): สีเขียวฟ้า
ตำแหน่ง: กองอยู่ด้าน ล่างซ้าย 
พบว่า ราคาลดเร็วเมื่อ Mileage เพิ่มกว่ากลุ่มอื่น
สรุปได้ว่า: เมื่อ Mileage เพิ่มขึ้น มีความสัมพันธ์เชิงลบกับ ราคา แต่ราคาอาจกระจายกว้างมากใน Mileage เดียวกัน เนื่องจาก Fuel Type มีผลชัดเจนต่อระดับราคา

ดูความสัมพันธ์ระหว่างเครื่องยนต์ ต่อ ปี โดยสีที่เข้ม-อ่อน แสดงราคาที่สูงขึ้นตามเฉดสี
*เพิ่มเติมจาก Aj.Waraporn แนะนำ ในการจัดกลุ่มประเภทรถยนต์ ในทาง Data Analytics เพื่อใช้อธิบาย Business Domain ตามด้านล่างนะครับ
1.0 - 1.5 L = เครื่องยนต์ขนาดเล็ก (รถบ้านราคาประหยัด)
1.6 - 1.8 L = เครื่องยนต์ขนาดกลาง (รถบ้านราคาประหยัด)
 2.0 L ขึ้นไป = เครื่องยนต์ขนาดใหญ่ (รถบ้านราคาประหยัด)
สิ่งที่น่าสนใจ
ข้อมูลรถยนต์ Toyota ส่วนใหญ่ใช้ เครื่องยนต์ขนาดเล็ก–กลาง (1.0–2.0 L) ซึ่งเป็นเราจัดกลุ่มรถเป็นรถบ้านราคาประหยัด
ข้อมูลรถรุ่นใหม่ (หลังปี 2016 ขึ้นไป) มี ความหลากหลายของขนาดเครื่องยนต์มากขึ้น และเริ่มเห็นเครื่องยนต์ขนาดกลาง–ใหญ่ (1.6–3.0 L) ชัดเจน
Price Insight (จากความเข้มของสี)
สีเข้ม = ราคาสูง พบมากในรถ ปีใหม่ + เครื่องยนต์ใหญ่
สีอ่อน = ราคาต่ำ กระจุกตัวในรถ ปีเก่า + เครื่องยนต์ขนาดเล็ก-กลาง
Insight: ราคาสูงขึ้นตามปีรถและขนาดเครื่องยนต์อย่างชัดเจน







ค้นพบว่า
เครื่องใหญ่ → ราคาสูงขึ้นชัดเจน, ความผันผวนของราคาสูง (box pot กว้าง)
เครื่องเล็ก → ราคาคงที่กว่า, ราคาค่อนข้างใกล้เคียงกัน
3.0 L ค่า Median ไม่สูงที่สุด แต่ราคามีการกระจายตัวสุด อาจมีทั้งรุ่นธรรมดาและรุ่นแพงมากปะปนกัน
Insight: Engine Size อาจเป็นปัจจัยหลัก ที่กำหนดระดับราคา แต่ขนาดเครื่องเพียงอย่างเดียวไม่สามารถเพียงพอในการตั้งราคา



สุดท้ายแล้ว เราสร้าง heatmap เพื่อดูความสัมพันธ์ของราคา
ความสัมพันธ์เชิงบวก 
Engine Size ↔ Price : +0.73 (สูงมาก)
 → ขนาดเครื่องยนต์เป็นปัจจัยที่มีผลต่อราคามากที่สุด


Year ↔ Price : +0.42 (ปานกลาง)
 → รถปีใหม่มีแนวโน้มราคาสูงกว่า


Tax ↔ Price : +0.22 (ต่ำ–ปานกลาง)
 → ภาษีสูงสัมพันธ์กับรถสเปกสูง / ราคาแพง
ความสัมพันธ์เชิงลบ
Mileage ↔ Price : −0.30 (เชิงลบ)
 → รถที่วิ่งเยอะ ราคาลดลง


MPG ↔ Price : −0.04 (อาจจะไม่มีผล)
 → ความประหยัดน้ำมันไม่ส่งผลต่อราคาโดยตรง
 สรุปคือ จาก heatmap ราคารถยนต์ได้รับอิทธิพลหลักจากขนาดเครื่องยนต์และปีรถ ซึ่งมีความสัมพันธ์เชิงบวกกับราคาอย่างค่อนข้างชัดเจน ในขณะที่ ระยะทางการใช้งาน (Mileage) มีความสัมพันธ์เชิงลบกับราคา สะท้อนถึงผลของการเสื่อมมูลค่าจากการใช้งาน ส่วนอัตราการประหยัดน้ำมัน (MPG) มีความสัมพันธ์กับราคาในระดับต่ำมาก จึงมีบทบาทค่อนข้างจำกัดในการอธิบายราคารถยนต์

6. สรุปผล

• Business Insights
ขนาดเครื่องยนต์ คือปัจจัยหลักในการแบ่งเกรดและราคารถ (ชัดเจนกว่าปีผลิต)
Market Structure: เป็นแบบ "เบ้ขวา" (Right Skewed) รถส่วนใหญ่เป็นราคาประหยัด หรือเครื่องยนต์เล็ก แต่มีรถเครื่องยนต์ใหญ่จำนวนน้อยดึงค่าเฉลี่ยขึ้น
รถเครื่องยนต์ดีเซลรักษามูลค่าได้ดีกว่าและเสื่อมราคาช้ากว่ารถเบนซินเมื่อใช้งานหนัก (ไมล์สูง)

 Predictive Results (จากการสร้างโมเดลในวิชา DS514-515 พบว่า)

โมเดล Random Forest มีค่าความแม่นยำสูง (R^2 = 97%)
และมีความคลาดเคลื่อนเฉลี่ย (MAE) ประมาณ £750 และ RMSE ประมาณ  £1,102.96 ต่อคัน
แสดงให้เห็นถึงศักยภาพในการนำไปใช้งานจริงในการตั้งราคารถยนต์

7. แนะนำและสิ่งที่คาดหวังในทางธุรกิจ

นำเครื่องมือ Pricing Tool ที่ได้จาก ML ให้ทีมขายใช้เป็น ราคากลาง ในการซื้อขายราคารถยนต์

สิ่งที่คาดหวัง
แก้ปัญหาการตั้งราคาผิดพลาด ช่วยกู้คืนยอดขายที่ตกลง 18% ให้กลับมา
ลดโอกาสการ (ขายถูกไป) และลดความเสี่ยงในการ (รับซื้อแพงไป)
สร้างมาตรฐานราคากลาง (Fair Price) ลดการตัดสินใจผ่านการพึ่งพาประสบการณ์ส่วนบุคคล

